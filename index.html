<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Target-Ops GitHub Organization Map</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sigma.js/1.2.1/sigma.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #f6f8fa;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #24292e;
            color: white;
            padding: 1rem;
            text-align: center;
        }
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 2rem auto;
            background-color: white;
            padding: 1rem;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
        }
        h1 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        .repo-list {
            list-style: none;
            padding: 0;
            position: relative;
        }
        .repo-item {
            padding: 1rem;
            border-bottom: 1px solid #e1e4e8;
        }
        .repo-item:last-child {
            border-bottom: none;
        }
        .repo-name {
            font-size: 1.25rem;
            color: #0366d6;
            text-decoration: none;
        }
        .repo-description {
            margin: 0.5rem 0;
        }
        .footer {
            text-align: center;
            padding: 1rem;
            background-color: #f6f8fa;
            border-top: 1px solid #e1e4e8;
        }
        #graph-container {
            height: 800px;
            margin: 2rem auto;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #info {
            position: absolute;
            background-color: #fff;
            padding: 10px;
            border-radius: 5px;
            display: none;
            z-index: 100;
            pointer-events: none;
            width: 400px;
            height: 300px;
        }
        #search {
            position: absolute;
            top: 10px;
            right: 10px;
        }
    </style>
</head>
<body>
    <header style="display: flex; align-items: center;">
        <img src="https://avatars.githubusercontent.com/u/171186748?s=200&v=4" alt="GitHub Logo" style="width: 50px; height: 50px; margin-right: 10px;">
        <h1>Target-Ops</h1>
    </header>
    <div class="container">
        <h1>Repositories</h1>
        <ul class="repo-list">
            <div id="graph-container"></div>
        </ul>
    </div>
    <div id="info">
        <iframe id="infoFrame" style="width: 100%; height: 100%; border: none;"></iframe>
    </div>
    <input id="search" type="text" placeholder="Search...">
    <footer class="footer">
        <p>&copy; 2024 TargetOps GitHub Organization</p>
    </footer>
    <script>
        const s = new sigma({
            graph: { nodes: [], edges: [] },
            container: 'graph-container',
            settings: {
                defaultLabelColor: '#000',
                defaultLabelSize: 25,
                defaultLabelBGColor: '#ddd',
                defaultHoverLabelBGColor: '#002147',
                defaultLabelHoverColor: '#fff',
                labelThreshold: 0,
                defaultEdgeType: 'arrow'
            }
        });
        const info = document.getElementById('info');
        const infoFrame = document.getElementById('infoFrame');
        const search = document.getElementById('search');
        fetch('https://api.github.com/orgs/target-ops/repos')
            .then(response => response.json())
            .then(data => {
                s.graph.addNode({
                    id: 'n0',
                    label: 'target-ops',
                    x: 0.5,
                    y: 0.5,
                    size: 5,
                    color: '#000'
                });
                data.forEach((repo, i) => {
                    s.graph.addNode({
                        id: 'n' + (i + 1),
                        label: repo.name,
                        x: Math.random(),
                        y: Math.random(),
                        size: 10,
                        color: '#69b3a2'
                    });
                    s.graph.addEdge({
                        id: 'e' + i,
                        source: 'n0',
                        target: 'n' + (i + 1),
                        color: '#ccc',
                        size: 1,
                    });
                });
                s.refresh();
            });

        s.bind('clickNode', function(e) {
            if (e.data.node.id === 'n0') {
                window.open('https://target-ops.github.io/', '_blank');
            } else {
                window.open('https://github.com/target-ops/' + e.data.node.label, '_blank');
            }
        });

        s.bind('overNode', function(e) {
            info.style.display = 'block';
            infoFrame.src = 'https://target-ops.github.io/' + e.data.node.label;
            info.style.left = e.data.captor.clientX + 'px';
            info.style.top = e.data.captor.clientY + 'px';
        });
        s.bind('outNode', function() {
            info.style.display = 'none';
        });
        search.addEventListener('input', function() {
            const query = this.value.toLowerCase();
            s.graph.nodes().forEach(function(n) {
                n.hidden = n.label.toLowerCase().indexOf(query) === -1;
            });
            s.refresh();
        });
    </script>
</body>
</html>
